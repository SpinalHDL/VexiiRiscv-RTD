<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to use &mdash; VexiiRiscv  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/gh-fork-ribbon.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/vexiiriscv.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/logo3_32x32.png"/>
    <link rel="canonical" href="https://spinalhdl.github.io/VexiiRiscv-RTD/master/VexiiRiscv/HowToUse/index.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/2.6.8/skins/default.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/2.6.8/wavedrom.min.js"></script>
        <script src="../../_static/dialog.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Performance / Area / FMax" href="../Performance/index.html" />
    <link rel="prev" title="Debug support" href="../Debug/index.html" />
     
    <!-- source/_templates/layout.html -->
    
    
    

</head>

<body class="wy-body-for-nav">
     
    
    
    
    <div class="div-svg-github-corner github-corner-abs">
    <a href="https://github.com/SpinalHDL/VexiiRiscv-RTD/blob/master/source/VexiiRiscv/HowToUse/index.rst" class="github-corner github-fork-ribbon" aria-label="Edit on GitHub" data-ribbon="Edit on GitHub" title="Edit on GitHub">
      <object id="svg-github-corner" data="../../_static/github-corner-right.svg" class="svg-github-corner github-corner-abs" width="80" height="80"></object>
    </a>
    </div>
    
    
    

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VexiiRiscv
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction/index.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/index.html#other-doc-media-talks">Other doc / media / talks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/index.html#technicalities">Technicalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/index.html#navigating-the-code">Navigating the code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/index.html#about-risc-v">About RISC-V</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/index.html#about-vexriscv-not-vexiiriscv">About VexRiscv (not VexiiRiscv)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/index.html#check-list">Check list</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Framework/index.html">Framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Framework/index.html#tools-and-api">Tools and API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Framework/index.html#scala-spinalhdl">Scala / SpinalHDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Framework/index.html#plugin-fiber-retainer">Plugin / Fiber / Retainer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Framework/index.html#simple-all-in-one-example">Simple all-in-one example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Framework/index.html#negotiation-example">Negotiation example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Framework/index.html#database">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Framework/index.html#pipeline-api">Pipeline API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Fetch/index.html">Fetch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#fetchpipelineplugin">FetchPipelinePlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#pcplugin">PcPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#fetchcachelessplugin">FetchCachelessPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#fetchl1plugin">FetchL1Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#prefetchernextlineplugin">PrefetcherNextLinePlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#btbplugin">BtbPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#gshareplugin">GSharePlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fetch/index.html#historyplugin">HistoryPlugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Decode/index.html">Decode</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Decode/index.html#decodepipelineplugin">DecodePipelinePlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Decode/index.html#alignerplugin">AlignerPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Decode/index.html#decoderplugin">DecoderPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Decode/index.html#dispatchplugin">DispatchPlugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Decode/index.html#architecture">Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Decode/index.html#elaboration">Elaboration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Execute/index.html">Execute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Execute/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Execute/plugins.html">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Execute/plugins.html#infrastructures">Infrastructures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#executepipelineplugin">ExecutePipelinePlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#executelaneplugin">ExecuteLanePlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#regfileplugin">RegFilePlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#srcplugin">SrcPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#rsunsignedplugin">RsUnsignedPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#intformatplugin">IntFormatPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#writebackplugin">WriteBackPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#learnplugin">LearnPlugin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Execute/plugins.html#instructions">Instructions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#intaluplugin">IntAluPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#barrelshifterplugin">BarrelShifterPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#branchplugin">BranchPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#mulplugin">MulPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#divplugin">DivPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#lsucachelessplugin">LsuCachelessPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#lsuplugin">LsuPlugin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Execute/plugins.html#special">Special</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#csraccessplugin">CsrAccessPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#csrramplugin">CsrRamPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#privilegedplugin">PrivilegedPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#trapplugin">TrapPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#performancecounterplugin">PerformanceCounterPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/plugins.html#envplugin">EnvPlugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Execute/custom.html">Custom instruction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Execute/custom.html#simd-add">SIMD add</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Execute/custom.html#plugin-implementation">Plugin implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/custom.html#vexiiriscv-generation">VexiiRiscv generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/custom.html#software-test">Software test</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/custom.html#simulation">Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Execute/custom.html#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Execute/fpu.html">FPU</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Execute/fpu.html#plugins-architecture">Plugins architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Execute/fpu.html#area-timings-options">Area / Timings options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Execute/fpu.html#optimized-software">Optimized software</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../BranchPrediction/index.html">Branch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../BranchPrediction/index.html#btbplugin">BtbPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BranchPrediction/index.html#gshareplugin">GSharePlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BranchPrediction/index.html#decodeplugin">DecodePlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BranchPrediction/index.html#branchplugin">BranchPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BranchPrediction/index.html#learnplugin">LearnPlugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Memory/index.html">Memory (LSU)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Memory/index.html#without-l1">Without L1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Memory/index.html#with-l1">With L1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Memory/index.html#prefetching">Prefetching</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Memory/index.html#prefetchrptplugin">PrefetchRptPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Memory/index.html#performance-measurements">performance measurements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Memory/index.html#hardware-memory-coherency">Hardware Memory coherency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Memory/index.html#memory-system">Memory system</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Memory/index.html#why-tilelink">Why Tilelink</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Memory/index.html#efficiency-cookbook">Efficiency cookbook</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Debug/index.html">Debug support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Debug/index.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Debug/index.html#embeddedriscvjtag">EmbeddedRiscvJtag</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#repo-setup">Repo setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generate-verilog">Generate verilog</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-a-simulation">Run a simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#synthesis">Synthesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-resources">Other resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-intellij-idea">Using IntelliJ IDEA</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Performance/index.html">Performance / Area / FMax</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Performance/index.html#tuning">Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Performance/index.html#critical-paths-tool">Critical paths tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Soc/index.html">SoC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Soc/microsoc.html">MicroSoc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Soc/microsoc.html#verilog-generation">Verilog generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Soc/microsoc.html#simulation-spinalsim-verilator">Simulation (SpinalSim / Verilator)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Soc/microsoc.html#adding-a-custom-peripheral">Adding a custom peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Soc/microsoc.html#exporting-an-apb3-bus-to-the-toplevel">Exporting an APB3 bus to the toplevel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Soc/microsoc.html#adding-a-custom-instruction">Adding a custom instruction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Soc/litex.html">Litex</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VexiiRiscv</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">How to use</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/SpinalHDL/VexiiRiscv-RTD/blob/master/source/VexiiRiscv/HowToUse/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             <dialog id="doc-dialog-version" role="dialog" class="collapse-once" aria-modal="false" data-default-state="close" data-current-version="master" data-latest-version="master">
<p class="doc-version-warning-banner">
  <strong>
    
    You're reading an pre-release version of this documentation.<br/>
    For the latest stable release version, please have a look at <a href="index.html">master</a>.
    
  </strong>
  <div>
    <form>
      <button formmethod="dialog" type="submit" class="doc-dialog-dismiss" aria-label="close">Dismiss</button>
    </form>
  </div>
</p>
</dialog>




  <section id="how-to-use">
<h1>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this heading"></a></h1>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>You will need :</p>
<ul class="simple">
<li><p>A java JDK</p></li>
<li><p>SBT (Scala build tool)</p></li>
<li><p>Verilator (optional, for simulations)</p></li>
<li><p>RVLS / Spike dependencies (optional, if you want to have lock-step simulations checking)</p></li>
<li><p>GCC for RISC-V (optional, if you want to compile some code)</p></li>
</ul>
<p>On debian :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># JAVA JDK</span>
sudo<span class="w"> </span>add-apt-repository<span class="w"> </span>-y<span class="w"> </span>ppa:openjdk-r/ppa
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>openjdk-19-jdk<span class="w"> </span>-y<span class="w"> </span><span class="c1"># You don&#39;t exactly need that version</span>
sudo<span class="w"> </span>update-alternatives<span class="w"> </span>--config<span class="w"> </span>java
sudo<span class="w"> </span>update-alternatives<span class="w"> </span>--config<span class="w"> </span>javac

<span class="c1"># Install SBT - https://www.scala-sbt.org/</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb https://repo.scala-sbt.org/scalasbt/debian all main&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/sbt.list
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb https://repo.scala-sbt.org/scalasbt/debian /&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/sbt_old.list
curl<span class="w"> </span>-sL<span class="w"> </span><span class="s2">&quot;https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0x2EE0EA64E40A89B84B2DF73499E82A75642AC823&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>apt-key<span class="w"> </span>add
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>sbt

<span class="c1"># Verilator (optional, for simulations)</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>git<span class="w"> </span>make<span class="w"> </span>autoconf<span class="w"> </span>g++<span class="w"> </span>flex<span class="w"> </span>bison
git<span class="w"> </span>clone<span class="w"> </span>http://git.veripool.org/git/verilator<span class="w">   </span><span class="c1"># Only first time</span>
unsetenv<span class="w"> </span>VERILATOR_ROOT<span class="w">  </span><span class="c1"># For csh; ignore error if on bash</span>
<span class="nb">unset</span><span class="w"> </span>VERILATOR_ROOT<span class="w">  </span><span class="c1"># For bash</span>
<span class="nb">cd</span><span class="w"> </span>verilator
git<span class="w"> </span>pull<span class="w">        </span><span class="c1"># Make sure we&#39;re up-to-date</span>
git<span class="w"> </span>checkout<span class="w"> </span>v4.216<span class="w"> </span><span class="c1"># You don&#39;t exactly need that version</span>
autoconf<span class="w">        </span><span class="c1"># Create ./configure script</span>
./configure
make
sudo<span class="w"> </span>make<span class="w"> </span>install

<span class="c1"># RVLS / Spike dependencies (optional, for simulations)</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>device-tree-compiler<span class="w"> </span>libboost-all-dev
<span class="c1"># Install ELFIO, used to load elf file in the sim</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/serge1/ELFIO.git
<span class="nb">cd</span><span class="w"> </span>ELFIO
git<span class="w"> </span>checkout<span class="w"> </span>d251da09a07dff40af0b63b8f6c8ae71d2d1938d<span class="w"> </span><span class="c1"># Avoid C++17</span>
sudo<span class="w"> </span>cp<span class="w"> </span>-R<span class="w"> </span>elfio<span class="w"> </span>/usr/include
<span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>ELFIO

<span class="c1"># Getting a RISC-V toolchain (optional, if you want to compile RISC-V software)</span>
<span class="nv">version</span><span class="o">=</span>riscv64-unknown-elf-gcc-8.3.0-2019.08.0-x86_64-linux-ubuntu14
wget<span class="w"> </span>-O<span class="w"> </span>riscv64-unknown-elf-gcc.tar.gz<span class="w"> </span>riscv<span class="w"> </span>https://static.dev.sifive.com/dev-tools/<span class="nv">$version</span>.tar.gz
tar<span class="w"> </span>-xzvf<span class="w"> </span>riscv64-unknown-elf-gcc.tar.gz
sudo<span class="w"> </span>mv<span class="w"> </span><span class="nv">$version</span><span class="w"> </span>/opt/riscv
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export PATH=/opt/riscv/bin:$PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</pre></div>
</div>
</section>
<section id="repo-setup">
<h2>Repo setup<a class="headerlink" href="#repo-setup" title="Permalink to this heading"></a></h2>
<p>After installing the dependencies (see above) :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>--recursive<span class="w"> </span>https://github.com/SpinalHDL/VexiiRiscv.git
<span class="nb">cd</span><span class="w"> </span>VexiiRiscv

<span class="c1"># (optional) Compile riscv-isa-sim (spike), used as a golden model during the sim to check the dut behaviour (lock-step)</span>
<span class="nb">cd</span><span class="w"> </span>ext/riscv-isa-sim
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
../configure<span class="w"> </span>--prefix<span class="o">=</span><span class="nv">$RISCV</span><span class="w"> </span>--enable-commitlog<span class="w">  </span>--without-boost<span class="w"> </span>--without-boost-asio<span class="w"> </span>--without-boost-regex
make<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="nb">cd</span><span class="w"> </span>../../..

<span class="c1"># (optional) Compile RVLS, (need riscv-isa-sim (spike)</span>
<span class="nb">cd</span><span class="w"> </span>ext/rvls
make<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="nb">cd</span><span class="w"> </span>../..
</pre></div>
</div>
</section>
<section id="generate-verilog">
<h2>Generate verilog<a class="headerlink" href="#generate-verilog" title="Permalink to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbt<span class="w"> </span><span class="s2">&quot;Test/runMain vexiiriscv.Generate&quot;</span>
</pre></div>
</div>
<p>You can get a list of the supported parameters via :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbt<span class="w"> </span><span class="s2">&quot;Test/runMain vexiiriscv.Generate --help&quot;</span>
<span class="w"> </span>--help<span class="w">                   </span>prints<span class="w"> </span>this<span class="w"> </span>usage<span class="w"> </span>text
<span class="w"> </span>--xlen<span class="w"> </span>&lt;value&gt;
<span class="w"> </span>--decoders<span class="w"> </span>&lt;value&gt;
<span class="w"> </span>--lanes<span class="w"> </span>&lt;value&gt;
<span class="w"> </span>--relaxed-branch
<span class="w"> </span>--relaxed-shift
<span class="w"> </span>--relaxed-src
<span class="w"> </span>--with-mul
<span class="w"> </span>--with-div
<span class="w"> </span>--with-rva
<span class="w"> </span>--with-rvc
<span class="w"> </span>--with-supervisor
<span class="w"> </span>...
</pre></div>
</div>
<p>Here is a list of the important parameters :</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Generation parameters</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>–xlen=32/64</p></td>
<td><p>Specify the CPU data width (RISC-V XLEN). 32 bits by default, can be set to 64 bits</p></td>
</tr>
<tr class="row-odd"><td><p>–with-rvm</p></td>
<td><p>Enable RISC-V mul/div instruction</p></td>
</tr>
<tr class="row-even"><td><p>–with-rvc</p></td>
<td><p>Enable RISC-V compressed instruction set</p></td>
</tr>
<tr class="row-odd"><td><p>–with-rva</p></td>
<td><p>Enable atomic instruction support</p></td>
</tr>
<tr class="row-even"><td><p>–with-rvf</p></td>
<td><p>Enable 32 bits floating point support</p></td>
</tr>
<tr class="row-odd"><td><p>–with-rvd</p></td>
<td><p>Enable 32/64 bits floating point support</p></td>
</tr>
<tr class="row-even"><td><p>–with-supervisor</p></td>
<td><p>Enable privileged supervisor, user and MMU</p></td>
</tr>
<tr class="row-odd"><td><p>–allow-bypass-from=Int</p></td>
<td><p>Specify from which execute stage the integer result bypassing is allowed. Default disabled. For performance set it to 0</p></td>
</tr>
<tr class="row-even"><td><p>–with-btb</p></td>
<td><p>Enable Branch Target Buffer prediction</p></td>
</tr>
<tr class="row-odd"><td><p>–with-gshare</p></td>
<td><p>Enable GShare conditional branch prediction. (Require the BTB to be enabled)</p></td>
</tr>
<tr class="row-even"><td><p>–with-ras</p></td>
<td><p>Enable Return Address Stack prediction. (Require the BTB to be enabled)</p></td>
</tr>
<tr class="row-odd"><td><p>–regfile-async</p></td>
<td><p>The register read ports become asynchronous, shaving one stage in the pipeline, but not all FPGA support this kind of memories.</p></td>
</tr>
<tr class="row-even"><td><p>–mmu-sync-read</p></td>
<td><p>The MMU TLB memories will be implemented using memories with synchronous read ports. This allows to keep it small on FPGA which doesn’t support asynchronous read ports</p></td>
</tr>
<tr class="row-odd"><td><p>–fetch-l1</p></td>
<td><p>Enable the L1 instruction cache</p></td>
</tr>
<tr class="row-even"><td><p>–fetch-l1-ways=Int</p></td>
<td><p>Set the number of instruction cache ways (4KB per way by default)</p></td>
</tr>
<tr class="row-odd"><td><p>–lsu-l1</p></td>
<td><p>Enable the L1 data cache</p></td>
</tr>
<tr class="row-even"><td><p>–lsu-l1-ways=Int</p></td>
<td><p>Set the number of data cache ways (4KB per way by default)</p></td>
</tr>
<tr class="row-odd"><td><p>–with-jtag-tap</p></td>
<td><p>Enable the RISC-V JTAG debugging.</p></td>
</tr>
</tbody>
</table>
<p>There is a lot more parameters which can be turned.</p>
</section>
<section id="run-a-simulation">
<span id="simulation"></span><h2>Run a simulation<a class="headerlink" href="#run-a-simulation" title="Permalink to this heading"></a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you take a VexiiRiscv core and use it with a simulator which does x-prop (not verilator), you will need to add the following option : –with-boot-mem-init.
By default this isn’t enabled, as it can degrade timings and area while not being necessary for a fully functional hardware.</p>
</div>
<p>Here is how you can run a Verilator based simulation, note that Vexiiriscv use mostly an opt-in configuration. So, most performance related configuration are disabled by default.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbt
compile
Test/runMain<span class="w"> </span>vexiiriscv.tester.TestBench<span class="w"> </span>--with-mul<span class="w"> </span>--with-div<span class="w"> </span>--load-elf<span class="w"> </span>ext/NaxSoftware/baremetal/dhrystone/build/rv32ima/dhrystone.elf<span class="w"> </span>--trace-all
</pre></div>
</div>
<p>This will generate a simWorkspace/VexiiRiscv/test folder which contains :</p>
<ul class="simple">
<li><p>test.fst : A wave file which can be open with gtkwave. It shows all the CPU signals</p></li>
<li><p>konata.log : A wave file which can be open with <a class="reference external" href="https://github.com/shioyadan/Konata">https://github.com/shioyadan/Konata</a>, it shows the pipeline behavior of the CPU</p></li>
<li><p>spike.log : The execution logs of Spike (golden model)</p></li>
<li><p>tracer.log : The execution logs of VexRiscv (Simulation model)</p></li>
</ul>
<p>Here is an example of the additional argument you can use to improve the IPC :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--with-btb<span class="w"> </span>--with-gshare<span class="w"> </span>--with-ras<span class="w"> </span>--decoders<span class="w"> </span><span class="m">2</span><span class="w"> </span>--lanes<span class="w"> </span><span class="m">2</span><span class="w"> </span>--with-aligner-buffer<span class="w"> </span>--with-dispatcher-buffer<span class="w"> </span>--with-late-alu<span class="w"> </span>--regfile-async<span class="w"> </span>--allow-bypass-from<span class="w"> </span><span class="m">0</span><span class="w"> </span>--div-radix<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<p>Here is a screen shot of a cache-less VexiiRiscv booting linux :</p>
<img alt="../../_images/konata.png" src="../../_images/konata.png" />
</section>
<section id="synthesis">
<h2>Synthesis<a class="headerlink" href="#synthesis" title="Permalink to this heading"></a></h2>
<p>VexiiRiscv is designed in a way which should make it easy to deploy on all FPGA.
including the ones without support for asynchronous memory read
(LUT ram / distributed ram / MLAB).
The one exception is the MMU, but if configured to only read the memory on cycle 0
(no tag hit), then the synthesis tool should be capable of inferring that asynchronous
read into a synchronous one (RAM block, work on Efinix FPGA)</p>
<p>By default SpinalHDL will generate memories in a Verilog/VHDL synthetisable way.
Otherwise, for ASIC, you likely want to enable the automatic memory blackboxing,
which will instead replace all memories defined in the design by a consistent blackbox
module/component, the user having then to provide those blackbox implementation.</p>
<p>Currently all memories used are “simple dual port ram”. While this is the best for FPGA usages,
on ASIC maybe some of those could be redesigned to be single port rams instead (todo).</p>
</section>
<section id="other-resources">
<h2>Other resources<a class="headerlink" href="#other-resources" title="Permalink to this heading"></a></h2>
<p>There a few other ways to start using VexiiRiscv :</p>
<ul class="simple">
<li><p>Trough the MicroSoc reference design, a little microcontroller for FPGA (<a class="reference internal" href="../Soc/microsoc.html#microsoc"><span class="std std-ref">MicroSoc</span></a>)</p></li>
<li><p>Through Litex, a tool to build SoC w(<a class="reference internal" href="../Soc/litex.html#litex"><span class="std std-ref">Litex</span></a>)</p></li>
</ul>
</section>
<section id="using-intellij-idea">
<h2>Using IntelliJ IDEA<a class="headerlink" href="#using-intellij-idea" title="Permalink to this heading"></a></h2>
<p>IntelliJ IDEA is a Java/Scala IDE which can help a lot navigating the codebase. You can get its community edition for free.
Then you just need to install the scala plugin (asked the first time you run the IDE), and open the VexiiRiscv folder with it.</p>
<p>The one issue is that it has a bug, and will give you a :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">object</span> <span class="n">Info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">member</span> <span class="n">of</span> <span class="n">package</span> <span class="n">spinal</span><span class="o">.</span><span class="n">core</span>
</pre></div>
</div>
<p>The workaround is that you need to run the “sbt compile” command in a terminal in the VexiiRiscv folder once.</p>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Debug/index.html" class="btn btn-neutral float-left" title="Debug support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Performance/index.html" class="btn btn-neutral float-right" title="Performance / Area / FMax" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 - 2024, VexiiRiscv.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
     
    <!-- source/_templates/footer.html -->
    
    <div class="doc-footer-current-version"><p>
    Version: master git~cfa6081 2024-11-19
    </p></div>
    


</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: master
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
       <dt>Languages</dt>
       <dd class="rtd-current-item">
         <a href="#">en</a>
       </dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="index.html">master</a></dd>
    </dl>
    <dl>
      <dt>Downloads</dt>
      <dd><a href="../../artefacts/VexiiRiscv_docs-master.">HTML</a></dd>
      <dd><a href="../../artefacts/VexiiRiscv_docs-master-SingleHTML.zip">SingleHTML</a></dd>
      <dd><a href="../../artefacts/VexiiRiscv_docs-master.pdf">PDF</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>